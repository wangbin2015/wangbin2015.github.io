<!DOCTYPE html>
<html>
<head>
	

	<title>Leaflet Plugin Authoring Guide - Leaflet - a JavaScript library for interactive maps</title>

	<meta charset=utf-8"utf-8" />

	

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	

	<link rel="shortcut icon" type="image/x-icon" href="../../../docs/images/favicon.ico" />

	<link href="http://leafletjs.com/atom.xml" type="application/atom+xml" rel="alternate" title="Leaflet Dev Blog Atom Feed" />

	<link rel="stylesheet" href="../../../docs/css/normalize.css" tppabs="http://leafletjs.com/docs/css/normalize.css" />
	<link rel="stylesheet" href="../../../docs/css/main.css" tppabs="http://leafletjs.com/docs/css/main.css" />

	<link href="../../../../fonts.googleapis.com/css-family=Open+Sans-400,400italic,700,300.css" tppabs="http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,700,300" rel='stylesheet' type='text/css'>

	<script src="../../../docs/highlight/highlight.pack.js" tppabs="http://leafletjs.com/docs/highlight/highlight.pack.js"></script>
	<link rel="stylesheet" href="../../../docs/highlight/styles/github-gist.css" tppabs="http://leafletjs.com/docs/highlight/styles/github-gist.css" />

	<!-- Leaflet -->
	<link rel="stylesheet" href="../../../dist/leaflet.css" tppabs="http://leafletjs.com/dist/leaflet.css" />
	<script src="../../../dist/leaflet.js" tppabs="http://leafletjs.com/dist/leaflet.js"></script>

	

	<script>
		ACCESS_TOKEN = 'pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ';
		CM_ATTR = 'Map data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery 漏 <a href="http://cloudmade.com/">CloudMade</a>';
		CM_URL = '../../../../{s}.tile.cloudmade.com/d4fc77ea4a63471cab2423e66626cbb6/{styleId}/256/{z}/{x}/{y}.png'/*tpa=http://{s}.tile.cloudmade.com/d4fc77ea4a63471cab2423e66626cbb6/{styleId}/256/{z}/{x}/{y}.png*/;
		MB_ATTR = 'Map data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery 漏 <a href="http://mapbox.com/">Mapbox</a>';
		MB_URL = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=' + ACCESS_TOKEN;
		OSM_URL = '../../../../{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'/*tpa=http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png*/;
		OSM_ATTRIB = '&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors';
	</script>
</head>
<body class="post-page">

<h1><a href="../../../index.htm" tppabs="http://leafletjs.com/"><img src="../../../docs/images/logo.png" tppabs="http://leafletjs.com/docs/images/logo.png" alt="Leaflet" width="300" /></a></h1>
<h3 class="tagline">an open-source JavaScript library<br> for mobile-friendly interactive maps</h3>

<ul class="nav">
	<li>
		
			<a href="../../../index.html" tppabs="http://leafletjs.com/index.html">Overview</a>
		
	</li>
	<li>
		
			<a href="../../../examples.html" tppabs="http://leafletjs.com/examples.html">Tutorials</a>
		
	</li>
	<li>
		
			<a href="../../../reference.html" tppabs="http://leafletjs.com/reference.html">Docs</a>
		
	</li>
	<li>
		
			<a href="../../../download.html" tppabs="http://leafletjs.com/download.html">Download</a>
		
	</li>
	<li>
		
			<a href="../../../plugins.html" tppabs="http://leafletjs.com/plugins.html">Plugins</a>
		
	</li>
	<li>
		
			<a href="../../../blog.html" tppabs="http://leafletjs.com/blog.html" class="active">Blog</a>
		
	</li>
</ul>

<div class="container">


<p><a href="../../../blog.html" tppabs="http://leafletjs.com/blog.html">&larr; Back to the list of blog posts</a></p>

<h2>Leaflet Plugin Authoring Guide</h2>

<p class="post-meta">Posted on 28 June 2013 by <a href="javascript:if(confirm('http://agafonkin.com/en  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://agafonkin.com/en'" tppabs="http://agafonkin.com/en">Vladimir Agafonkin</a></p>

<p>One of the greatest things about Leaflet is its powerful plugin ecosystem.
The <a href="../../../plugins.html" tppabs="http://leafletjs.com/plugins.html">Leaflet plugins page</a> lists dozens of awesome plugins, and more are being added every week.</p>

<p>This guide lists a number of best practices for publishing a Leaflet plugin that meets the quality standards of Leaflet itself. Also available <a href="javascript:if(confirm('https://github.com/Leaflet/Leaflet/blob/master/PLUGIN-GUIDE.md  \n\n该文件未被 Teleport Pro 下载，因为 是一个使用未支持协议的地址(例如: gopher)。  \n\n你想要从服务器打开它吗?'))window.location='https://github.com/Leaflet/Leaflet/blob/master/PLUGIN-GUIDE.md'" tppabs="https://github.com/Leaflet/Leaflet/blob/master/PLUGIN-GUIDE.md">in the repo</a>.</p>

<h3 id="presentation">Presentation</h3>

<h4 id="repository">Repository</h4>

<p>The best place to put your Leaflet plugin to is a separate <a href="javascript:if(confirm('http://github.com/  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://github.com/'" tppabs="http://github.com/">GitHub</a> repository.
If you create a collection of plugins for different uses,
don&#8217;t put them in one repo &mdash;
it&#8217;s usually easier to work with small, self-contained plugins in individual repositories.</p>

<h4 id="demo">Demo</h4>

<p>The most essential thing to do when publishing a plugin is to include a demo that showcases what the plugin does &mdash;
it&#8217;s usually the first thing people will look for.</p>

<p>The easiest way to put up a demo is using <a href="javascript:if(confirm('http://pages.github.com/  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://pages.github.com/'" tppabs="http://pages.github.com/">GitHub Pages</a>.
A good <a href="javascript:if(confirm('https://help.github.com/articles/creating-project-pages-manually  \n\n该文件未被 Teleport Pro 下载，因为 是一个使用未支持协议的地址(例如: gopher)。  \n\n你想要从服务器打开它吗?'))window.location='https://help.github.com/articles/creating-project-pages-manually'" tppabs="https://help.github.com/articles/creating-project-pages-manually">starting point</a> is creating a <code>gh-pages</code> branch in your repo and adding an <code>index.html</code> page to it  &mdash;
after pushing, it&#8217;ll be published as <code>http://&lt;user&gt;.github.io/&lt;repo&gt;</code>.</p>

<h4 id="readme">Readme</h4>

<p>The next thing you need to have is a descriptive <code>README.md</code> in the root of the repo (or a link to a website with a similar content).
At a minimum it should contain the following items:</p>

<ul>
  <li>name of the plugin</li>
  <li>a simple, concise description of what it does</li>
  <li>requirements
    <ul>
      <li>Leaflet version</li>
      <li>other external dependencies (if any)</li>
      <li>browser / device compatibility</li>
    </ul>
  </li>
  <li>links to demos</li>
  <li>instructions for including the plugin</li>
  <li>simple usage code example</li>
  <li>API reference (methods, options, events)</li>
</ul>

<h4 id="license">License</h4>

<p>Every open source repository should include a license.
If you don&#8217;t know what open source license to choose for your code,
<a href="javascript:if(confirm('http://opensource.org/licenses/MIT  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://opensource.org/licenses/MIT'" tppabs="http://opensource.org/licenses/MIT">MIT License</a> and <a href="javascript:if(confirm('http://opensource.org/licenses/BSD-2-Clause  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://opensource.org/licenses/BSD-2-Clause'" tppabs="http://opensource.org/licenses/BSD-2-Clause">BSD 2-Clause License</a> are both good choices.
You can either put it in the repo as a <code>LICENSE</code> file or just link to the license from the Readme.</p>

<h3 id="code">Code</h3>

<h4 id="file-structure">File Structure</h4>

<p>Keep the file structure clean and simple,
don&#8217;t pile up lots of files in one place  &mdash;
make it easy for a new person to find their way in your repo.</p>

<p>A barebones repo for a simple plugin would look like this:</p>

<pre><code>my-plugin.js
README.md
</code></pre>

<p>An example of a file structure for a more sophisticated plugin:</p>

<pre><code>/src        JS source files
/dist       minified plugin JS, CSS, images
/spec       test files
/examples   HTML examples of plugin usage
README.md
LICENSE
package.json
</code></pre>

<h4 id="code-conventions">Code Conventions</h4>

<p>Everyone&#8217;s tastes are different, but it&#8217;s important to be consistent with whatever conventions you choose for your plugin.</p>

<p>For a good starting point, check out <a href="javascript:if(confirm('https://github.com/airbnb/javascript  \n\n该文件未被 Teleport Pro 下载，因为 是一个使用未支持协议的地址(例如: gopher)。  \n\n你想要从服务器打开它吗?'))window.location='https://github.com/airbnb/javascript'" tppabs="https://github.com/airbnb/javascript">Airbnb JavaScript Guide</a>.
Leaflet follows pretty much the same conventions
except for using smart tabs (hard tabs for indentation, spaces for alignment)
and putting a space after the <code>function</code> keyword.</p>

<h4 id="plugin-api">Plugin API</h4>

<p>Never expose global variables in your plugin.<br />
If you have a new class, put it directly in the <code>L</code> namespace (<code>L.MyPlugin</code>).<br />
If you inherit one of the existing classes, make it a sub-property (<code>L.TileLayer.Banana</code>).<br />
If you want to add new methods to existing Leaflet classes, you can do it like this: <code>L.Marker.include({myPlugin: })</code>.</p>

<p>Function, method and property names should be in <code>camelCase</code>.<br />
Class names should be in <code>CapitalizedCamelCase</code>.</p>

<p>If you have a lot of arguments in your function, consider accepting an options object instead (putting default values where possible so that users don&#8217;t need specify all of them):</p>

<pre><code>// bad
marker.myPlugin('bla', 'foo', null, {}, 5, 0);

// good
marker.myPlugin('bla', {
	optionOne: 'foo',
	optionThree: 5
});
</code></pre>

<p>And most importantly, keep it simple. Leaflet is all about <em>simplicity</em>.</p>

<p>Cheers,<br />
Vladimir.</p>


<div id="disqus_thread"></div>

<script>
	var disqus_shortname = 'leafletjs';
//	var disqus_developer = 1;

	(function() {
		var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
		dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
		(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	})();
</script>

<a href="javascript:if(confirm('http://disqus.com/  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://disqus.com/'" tppabs="http://disqus.com/" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



<div class="footer">
	<p>&copy; 2015 <a href="javascript:if(confirm('http://agafonkin.com/en  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://agafonkin.com/en'" tppabs="http://agafonkin.com/en">Vladimir Agafonkin</a>. Maps &copy; <a href="javascript:if(confirm('http://openstreetmap.org/copyright  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://openstreetmap.org/copyright'" tppabs="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors.</p>
</div>

</div>

<nav class="ext-links">
  <a class="ext-link twitter" href="javascript:if(confirm('http://twitter.com/LeafletJS  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://twitter.com/LeafletJS'" tppabs="http://twitter.com/LeafletJS" title="Follow LeafletJS on Twitter"><img alt="Follow LeafletJS on Twitter" src="../../../docs/images/twitter-round.png" tppabs="http://leafletjs.com/docs/images/twitter-round.png" width="46" /></a>
  <a class="ext-link github" href="javascript:if(confirm('http://github.com/Leaflet/Leaflet  \n\n该文件未被 Teleport Pro 下载，因为 它位于起始地址以设置的边界以外的域或路径中。  \n\n你想要从服务器打开它吗?'))window.location='http://github.com/Leaflet/Leaflet'" tppabs="http://github.com/Leaflet/Leaflet" title="View Source on GitHub"><img alt="View Source on GitHub" src="../../../docs/images/github-round.png" tppabs="http://leafletjs.com/docs/images/github-round.png" width="46" /></a>
  <a class="ext-link forum" href="javascript:if(confirm('https://groups.google.com/forum/  \n\n该文件未被 Teleport Pro 下载，因为 是一个使用未支持协议的地址(例如: gopher)。  \n\n你想要从服务器打开它吗?'))window.location='https://groups.google.com/forum/#!forum/leaflet-js'" tppabs="https://groups.google.com/forum/#!forum/leaflet-js" title="Ask for help on the Leaflet forum"><img alt="Official Leaflet forum" src="../../../docs/images/forum-round.png" tppabs="http://leafletjs.com/docs/images/forum-round.png" width="46" /></a>
</nav>

<script>
	hljs.configure({tabReplace: '    '});
	hljs.initHighlighting();

	(function () {
		if (document.body.className.indexOf('api-page') !== -1) {
			var headers = document.getElementsByTagName('h2');

			for (var i = 0, len = headers.length; i < len; i++) {
				if (headers[i].id) {
					headers[i].onclick = function(e) {
						if (e.offsetX < 0) {
							window.location.hash = '#' + this.id;
						}
					};
				}
			}
		}
	})();
</script>

<script>
	var _gaq = _gaq || [];
	_gaq.push([ '_setAccount', 'UA-4147697-4' ]);
	_gaq.push([ '_trackPageview' ]);

	(function() {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl'
				: 'http://www/')
				+ '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();
</script>

<script type="text/javascript" src="../../../docs/js/docs.js" tppabs="http://leafletjs.com/docs/js/docs.js"></script>
</body>
</html>
